<!DOCTYPE html>
<html lang="ru" xml:lang="ru" xmlns="http://www.w3.org/1999/xhtml">

<head>

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/favicon.ico" />

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" />

	<style media="all">

		@page {
			size: 450mm 320mm;
			margin: 0;
		}

		@font-face {
			font-family: 'Open Sans Condensed';
			src: local( 'Open Sans Condensed Bold' ),
				 url( '/@/OpenSansCondensed-Bold.ttf' );
		}

		@font-face {
			font-family: 'Open Sans Condensed Light';
			src: local( 'Open Sans Condensed Light' ),
				 url( '/@/OpenSansCondensed-Light.ttf' );
		}

		*,
		:after,
		:before {
			margin: 0;
			padding: 0;
			border: 0;
			transition: all 0.1s linear;
		}

		ul {
			list-style-type: none;
		}

		body {
			font-family: 'Open Sans Condensed Light', Arial, sans-serif;
			width: 450mm;
			height: 640mm;
			/*background: #fff;*/
			-webkit-print-color-adjust: exact !important;
		}

		[contenteditable="true"] {
			-webkit-user-modify: read-only;
		}

		.page {

			--ratio: 1;

			width: calc( 450mm - 16mm );
			height: calc( 320mm - 16mm );
			padding: 8mm;
			display: grid;
			grid-template-columns: 96.5mm 96.5mm 96.5mm 96.5mm;
			grid-gap: 16mm;
			page-break-after: always;

			overflow: hidden;

		}

		.bold {
			font-family: 'Open Sans Condensed', Arial, sans-serif;
			text-transform: uppercase;
		}

		.ml:not( :empty ):after {
			content: 'ml';
		}

		.opacity {
			opacity: 0.6;
		}

		.opacity .opacity {
			opacity: 1;
		}

		.section {
			display: block;
			position: relative;
		}

		.title {
			font-size: 33pt;
			line-height: 40pt;
			text-align: center;
			padding-right: 20mm;
		}

		.title:after {
			content: '';
			display: block;
			width: 69mm;
			height: 1mm;
			line-height: 1mm;
			border-radius: 0.5mm;
			background: rgba( 0, 0, 0, .2 );
			left: 5mm;
			position: relative;
			margin-bottom: 10mm;
		}

		.logo {
			filter: invert( 0.2 );
			width: auto;
			height: 18mm;
			position: absolute;
			right: 5mm;
			top: 5mm;
		}

		.sub-text {
			font-size: 12pt;
		}

		.cocktail {

			--color: #000;
			--scale: 1;

			font-size: 14pt;
			line-height: 12pt;

			position: relative;
			display: grid;
			grid-template-columns: auto 72mm;
			width: 100%;

			margin-bottom: 4mm;

		}

		.name {
			font-size: 14pt;
			line-height: 13pt;
			padding-right: 20mm;
			margin-bottom: 1mm;
		}

		.cost:before {
			content: '';
			display: block;
			width: 50mm;
			height: 0.5mm;
			background: var( --color );
			position: absolute;
			left: -49mm;
		}

		.container {
			text-align: right;
			height: 1mm;
			padding-right: 5mm;
		}

		.cost {
			display: inline-block;
			font-size: 16pt;
			line-height: 7mm;
			width: 18mm;
			height: 7mm;
			position: relative;
			text-align: center;
			color: #fff;
		}

		.cost svg {
			position: absolute;
			left: 0;
			top: 0;
			z-index: -1;
		}

		.cost polygon {
			fill: var( --color );
		}

		.cost > span + span {
			font-size: 12pt;
		}

		.cost > span + span:not( :empty ):before {
			content: '.';
		}

		.mix {
			padding-right: 27mm;
			margin-bottom: 2mm;
		}

		.img {
			width: 24mm;
			position: relative;
		}

		.img img {
			width: auto;
			max-height: 22mm;
			object-fit: contain;
			position: absolute;
			top: 50%;
			left: 50%;
			transform-origin: 50% 50%;
			transform: translate( -50%, -50% ) scale( var( --scale ) );
		}

		.cocktail:nth-child( 2n ) > div {
			position: relative;
			left: -24.5mm;
			text-align: right;
		}

		.cocktail:nth-child( 2n ) .img {
			left: 72mm;
			text-align: center;
		}

		.cocktail:nth-child( 2n ) .name {
			padding: 0 0 0 20mm;
		}

		.cocktail:nth-child( 2n ) .container {
			padding: 0 0 0 5mm;
			text-align: left;
		}

		.cocktail:nth-child( 2n ) .cost:before {
			left: auto;
			right: -49mm;
		}

		.cocktail:nth-child( 2n ) .cost {
			right: auto;
		}

		.cocktail:nth-child( 2n ) .cost svg {
			transform: rotate( 180deg );
		}

		.cocktail:nth-child( 2n ) .mix {
			padding: 0 0 0 27mm;
		}

		.ps {
			font-size: 14pt;
			line-height: 16pt;
			text-align: right;
			padding: 8mm 5mm 0 10mm;
			opacity: 0.8;
		}

		@media screen {

			html {
				/*background: #999;*/
			}

			.page {
				outline: 1px solid #555;
				position: relative;
			}

			.page:before {
				content: '';
				display: block;
				position: absolute;
				top: 8mm;
				right: 8mm;
				bottom: 8mm;
				left: 8mm;
				outline: 1mm dashed #f99;
				pointer-events: none;
			}

		}

	</style>

	<template id="section">
		<div class="section">
			<div class="title bold" contenteditable="true"></div>
			<img class="logo" src="/@/logo.svg" />
			<ul></ul>
		</div>
	</template>

	<template id="cocktail">
		<li class="cocktail item">
			<div class="img"><img /></div>
			<div>
				<div class="name bold"></div>
				<div class="container">
					<span class="cost bold"><span></span><span></span><svg xmlns="http://www.w3.org/2000/svg" width="18mm" height="7mm" version="1.1" viewBox="0 0 18 7"><polygon points="0,0 2.5,3.5 0,7 15.5,7 18,3.5 15.5,0"/></svg></span>
				</div>
				<div class="mix"></div>
				<div class="cap opacity sub-text ml"></div>
			</div>
		</li>
	</template>

</head>

<body>

<article class="page">
	<div></div>
	<div></div>
	<div></div>
	<div></div>
</article>

<article class="page">
	<div></div>
	<div></div>
	<div></div>
	<div></div>
</article>

<script type="text/javascript">( ( /** Window */ window ) =>  window.fetch( 'data.js?' + window.Math.random() ).then( ( respose ) => respose.text() ).then( ( data ) => {

	data = window.eval( data );

	/** @noinline */
	var querySelector = ( node, selector ) => node.querySelector( selector );
	/** @noinline */
	var querySelectorAll = ( node, selector ) => node.querySelectorAll( selector );
	/** @noinline */
	var cloneNode = ( node ) => document.importNode( node.content, true );
	/** @noinline */
	var appendChild = ( node, child ) => node.appendChild( child );

	var document =	window.document;
	var Array =		window.Array;

	var lang = window.location.search.replace( /^\?/, '' );

	var getName = ( data ) => Array.isArray( data ) ? data[ lang === 'en' ? 1 : 0 ] : data;

	var sectionTemplate = querySelector( document, '#section' );

	var createSection = ( data, createLI ) => {

		var result = cloneNode( sectionTemplate );

		var left = querySelector( result, '.title' );
		var bottom = querySelector( result, 'ul' );

		left.textContent = getName( data.name );

		var arr = data.collection;
		var i = 0, l = arr.length;

		for ( ; i<l; ++i ) {
			appendChild( bottom, createLI( arr[ i ] ) );
		}

		return result;

	};

	var cocktailTemplate = querySelector( document, '#cocktail' );

	var createCocktail = ( data ) => {

		var result = cloneNode( cocktailTemplate );
		var li = querySelector( result, 'li' );
		var img = querySelector( result, 'img' );
		var span = querySelectorAll( result, '.cost span' );

		var c = data.cost.toFixed( 2 ).split( '.' );

		span[ 0 ].textContent = c[ 0 ];
		span[ 1 ].textContent = c[ 1 ];

		querySelector( result, '.name' ).textContent = getName( data.name );
		querySelector( result, '.cap' ).textContent = data.cap;
		querySelector( result, '.mix' ).textContent = getName( data.mix );

		img.src = data.img;

		if ( data.color ) li.style.setProperty( '--color', '#' + data.color.toString( 16 ) );

		if ( data.scale ) li.style.setProperty( '--scale', data.scale );

		return result;

	};

	var colon = querySelectorAll( document, '.page>div' );

	var coctails0 = querySelector( createSection( data.Cocktails0, createCocktail ), '.section' );
	var coctails1 = querySelector( createSection( data.Cocktails1, createCocktail ), '.section' );

	coctails1.insertAdjacentHTML( 'beforeend', '<div class="ps">Кроме прочего, у нас всегда можно заказать все базовые и классические коктейли, а так же шоты. Уточняйте у официантов.</div>' );

	appendChild( colon[ 0 ], coctails0 );
	// appendChild( colon[ 1 ], coctails0.cloneNode( true ) );
	// appendChild( colon[ 2 ], coctails0.cloneNode( true ) );
	// appendChild( colon[ 3 ], coctails0.cloneNode( true ) );

	appendChild( colon[ 4 ], coctails1 )
	// appendChild( colon[ 5 ], coctails1.cloneNode( true ) );
	// appendChild( colon[ 6 ], coctails1.cloneNode( true ) );
	// appendChild( colon[ 7 ], coctails1.cloneNode( true ) );



} ) )( this )</script>

</body>

</html>